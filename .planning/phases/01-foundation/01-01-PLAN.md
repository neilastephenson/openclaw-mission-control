---
phase: 01-foundation
plan: 01
type: execute
wave: 1
depends_on: []
files_modified:
  - package.json
  - convex/
  - src/
  - vite.config.ts
  - tsconfig.json
  - .env.local
  - vercel.json
autonomous: false
user_setup:
  - service: convex
    why: "Real-time backend database and serverless functions"
    env_vars:
      - name: CONVEX_DEPLOY_KEY
        source: "Convex Dashboard -> Settings -> Deploy keys (create production deploy key)"
    dashboard_config:
      - task: "Create Convex project"
        location: "https://dashboard.convex.dev -> New Project -> 'otto-mission-control'"
  - service: vercel
    why: "Frontend hosting with automatic deployments"
    env_vars:
      - name: VERCEL_TOKEN
        source: "Vercel Dashboard -> Settings -> Tokens (or use `vercel login` CLI)"

must_haves:
  truths:
    - "Stock openclaw-mission-control UI is visible at localhost:5173"
    - "Convex backend is running and connected (no connection errors in console)"
    - "Seed data populates dashboard with sample agents and tasks"
    - "Dashboard deployed to production URL on Vercel"
  artifacts:
    - path: "package.json"
      provides: "Project dependencies including convex, react, vite, tailwind"
      contains: "convex"
    - path: "convex/schema.ts"
      provides: "Convex database schema for agents, tasks, activity"
    - path: "src/App.tsx"
      provides: "Root React component with routing"
    - path: "vite.config.ts"
      provides: "Vite build configuration"
  key_links:
    - from: "src/App.tsx"
      to: "convex/"
      via: "ConvexProvider wrapping app"
      pattern: "ConvexProvider"
    - from: "convex/schema.ts"
      to: "convex/*.ts"
      via: "Schema defines tables used by mutations/queries"
      pattern: "defineSchema"
---

<objective>
Fork the openclaw-mission-control repository, install dependencies, configure Convex backend, verify the stock UI works locally, and deploy to Vercel.

Purpose: Establish the working foundation that all subsequent customization builds on. Nothing can happen until the stock version is running.
Output: Deployed dashboard at a production URL with stock UI fully functional.
</objective>

<execution_context>
@/Users/otto/.claude/get-shit-done/workflows/execute-plan.md
@/Users/otto/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
</context>

<tasks>

<task type="auto">
  <name>Task 1: Clone stock repo and set up project</name>
  <files>
    package.json
    convex/
    src/
    vite.config.ts
    tsconfig.json
  </files>
  <action>
    The current repo at /Users/otto/Projects/otto-mission-control has only .planning/, PRD.md, and research/. We need to pull in the stock openclaw-mission-control code.

    1. Add the upstream repo as a remote and pull its code:
       ```bash
       cd /Users/otto/Projects/otto-mission-control
       git remote add upstream https://github.com/manish-raana/openclaw-mission-control.git
       git fetch upstream
       git merge upstream/main --allow-unrelated-histories -m "merge: bring in stock openclaw-mission-control"
       ```
       If there are merge conflicts with any files, resolve by keeping both (our .planning/ files and their code).

    2. Install dependencies:
       ```bash
       bun install
       ```

    3. Set up Convex development backend:
       ```bash
       npx convex dev --once
       ```
       This will prompt for project creation if not already set up. Follow the prompts to create a new Convex project named "otto-mission-control".

    4. Seed the database with sample data:
       ```bash
       npx convex run seed:run
       ```

    5. Start the dev server and verify it runs:
       ```bash
       bun dev
       ```
       Verify no build errors. The app should be accessible at http://localhost:5173.

    IMPORTANT: Do NOT modify any stock code in this task. The goal is purely to get the stock version running as-is.
  </action>
  <verify>
    - `bun dev` starts without errors
    - `curl -s http://localhost:5173 | head -20` returns HTML with the app shell
    - Convex dashboard at https://dashboard.convex.dev shows the project with seeded data
    - No TypeScript errors: `npx tsc --noEmit`
  </verify>
  <done>
    Stock openclaw-mission-control is running locally with seeded data visible in the UI. All dependencies installed, Convex backend connected, no build or type errors.
  </done>
</task>

<task type="checkpoint:human-verify" gate="blocking">
  <what-built>
    Stock openclaw-mission-control dashboard running locally with Convex backend and seeded sample data.
  </what-built>
  <how-to-verify>
    1. Open http://localhost:5173 in your browser
    2. Verify you see the Mission Control dashboard with:
       - Agent list with sample agents
       - Task kanban board with columns (Inbox, Assigned, In Progress, Review, Done)
       - Activity feed section
    3. Click on an agent to verify filtering works
    4. Click on a task to verify the detail panel opens
    5. Confirm Convex connection (no errors in browser console about Convex)
  </how-to-verify>
  <resume-signal>Type "approved" to continue to deployment, or describe any issues</resume-signal>
</task>

<task type="auto">
  <name>Task 2: Deploy to Vercel</name>
  <files>
    vercel.json
  </files>
  <action>
    Deploy the stock dashboard to Vercel for production access.

    1. Deploy using the Vercel CLI:
       ```bash
       cd /Users/otto/Projects/otto-mission-control
       vercel --yes
       ```
       This creates the Vercel project and deploys. Note the deployment URL.

    2. Set up Convex production deployment:
       ```bash
       npx convex deploy
       ```
       This deploys the Convex backend to production. Note the production Convex URL.

    3. Set the Convex production URL as a Vercel environment variable:
       ```bash
       vercel env add VITE_CONVEX_URL production
       ```
       Enter the production Convex URL when prompted (format: https://xxx.convex.cloud).

    4. Redeploy to Vercel with the environment variable:
       ```bash
       vercel --prod --yes
       ```

    5. Seed the production database:
       ```bash
       CONVEX_DEPLOY_KEY=<key> npx convex run seed:run --prod
       ```
       Or use the Convex dashboard to run the seed function.

    Note: If `vercel` CLI is not installed, install it first: `bun add -g vercel`
    Note: If auth is required for Vercel CLI, this will pause and become a checkpoint.
  </action>
  <verify>
    - `curl -s <vercel-url> | head -20` returns the app HTML
    - Production URL loads in browser with stock dashboard visible
    - Convex production backend shows seeded data in dashboard
  </verify>
  <done>
    Dashboard is deployed and accessible at a Vercel production URL. Convex production backend is running with seeded data. Stock UI is fully functional in production.
  </done>
</task>

</tasks>

<verification>
1. Local dev server runs without errors at http://localhost:5173
2. Stock UI displays agents, tasks kanban, and activity feed
3. Convex backend is connected and serving data
4. Production deployment accessible at Vercel URL
5. Production Convex backend has seeded data
</verification>

<success_criteria>
- Stock openclaw-mission-control is running locally AND deployed to production
- No modifications to stock code (pure fork)
- Convex backend connected in both dev and production
- Sample data visible in both environments
- Git history shows clean merge from upstream
</success_criteria>

<output>
After completion, create `.planning/phases/01-foundation/01-01-SUMMARY.md`
</output>
